--- a/drivers/of/platform.c
+++ b/drivers/of/platform.c
@@ -389,7 +389,7 @@ static int of_platform_bus_create(struct
 	}
 
 	dev = of_platform_device_create_pdata(bus, bus_id, platform_data, parent);
-	if (!dev || !of_match_node(matches, bus))
+	if (!dev || (matches && !of_match_node(matches, bus)))
 		return 0;
 
 	for_each_child_of_node(bus, child) {
